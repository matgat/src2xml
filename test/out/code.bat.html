<!DOCTYPE html>
<html>
<!-- Do not edit! File generated by src2xml -->
<head>
<title>code.bat</title>
<meta name="keywords" content="bat,code,source,snippet"/>
<meta name="description" content="A bat source code snippet"/>
<style type="text/css">
/* Use this stylesheet as a starting template */
.bat-sourcecode
    {
     background-color: Snow;
     border: thick solid LightSteelBlue;
     white-space: pre;
     padding: 1ex;
     font-family: Consolas,'Courier New',monospace;
     color: Teal; /* default font color */
    }

.bat-line-comment
    {
     color: DarkSeaGreen; background-color: FloralWhite;
     font-style: italic;
    }

.bat-keyword
    {
     color: Black;
     font-weight: bold;
    }

.bat-variable
    {
     color: DodgerBlue;
    }

.bat-label
    {
     color: FireBrick; background-color: LightGoldenRodYellow;
     font-weight: bold;
    }

.bat-double-quoted
    {
     color: DarkGoldenRod;
    }

.bat-identifier
    {
     color: Black;
    }

</style>
</head>
<body>
<div xmlns='http://www.w3.org/1999/xhtml' class='bat-sourcecode'>@<span class='bat-keyword'>echo</span> <span class='bat-identifier'>off</span>
<span class='bat-keyword'>title</span> **** <span class='bat-identifier'>Compile</span> <span class='bat-identifier'>Website</span> ****
<span class='bat-line-comment'>rem   ****    winXP cmd batch file    ****</span>
<span class='bat-line-comment'>rem   ****  2009 - Matteo Gattanini   ****</span>
<span class='bat-line-comment'>rem @if not &quot;%OS%&quot;==&quot;Windows_NT&quot; goto :EXIT</span>

<span class='bat-line-comment'>rem   **** Dependencies ****</span>
<span class='bat-line-comment'>rem XSL transformation: call Transform.bat *.xml *.xsl outputfile</span>

<span class='bat-line-comment'>rem   **** Internal arguments ****</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>bindir</span>=<span class='bat-identifier'>bin</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>outdir</span>=<span class='bat-identifier'>html</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>outext</span>=<span class='bat-identifier'>html</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>imgdir</span>=<span class='bat-identifier'>common</span>/<span class='bat-identifier'>images</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>mainxml</span>=<span class='bat-identifier'>main</span>.<span class='bat-identifier'>xml</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>sitemapfile</span>=<span class='bat-identifier'>sitemap</span>
<span class='bat-line-comment'>REM   **** used programs ****</span>
:: <span class='bat-identifier'>dot</span>, <span class='bat-identifier'>neato</span>, <span class='bat-identifier'>twopi</span>, <span class='bat-identifier'>circo</span>, <span class='bat-identifier'>fdp</span>
<span class='bat-keyword'>set</span> <span class='bat-identifier'>graphviz</span>=<span class='bat-double-quoted'>&quot;<span class='bat-variable'>%programfiles%</span>\Graphviz2.22\bin\twopi.exe&quot;</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>CREATESITEMAP</span>

<span class='bat-keyword'>echo</span> <span class='bat-identifier'>asll</span>:<span class='bat-identifier'>fff</span>
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>afeag</span>: <span class='bat-identifier'>gag</span>
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>wegfawg</span> : <span class='bat-identifier'>gawgag</span>
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>wrgerges</span>  :<span class='bat-identifier'>gegaeg</span>
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>rgaawg</span>::<span class='bat-identifier'>gerg</span> :<span class='bat-identifier'>rger</span> : <span class='bat-identifier'>rgaewrg</span>: <span class='bat-identifier'>gearg</span>

<span class='bat-identifier'>abra</span><span class='bat-label'>

  :CREATESITEMAP</span>
<span class='bat-keyword'>call</span> <span class='bat-identifier'>Transform</span>.<span class='bat-identifier'>bat</span> <span class='bat-variable'>%mainxml%</span> <span class='bat-identifier'>site2graphviz</span>.<span class='bat-identifier'>xsl</span> <span class='bat-variable'>%sitemapfile%</span> <span class='bat-double-quoted'>&quot;outext=<span class='bat-variable'>%outext%</span>&quot;</span> <span class='bat-double-quoted'>&quot;imgdir=<span class='bat-variable'>%imgdir%</span>&quot;</span>
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>

<span class='bat-keyword'>set</span> <span class='bat-identifier'>prevcd</span>=<span class='bat-variable'>%cd%</span>
<span class='bat-keyword'>cd</span> <span class='bat-variable'>%outdir%</span>\
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>moved</span> <span class='bat-identifier'>to</span>: <span class='bat-identifier'>here</span> <span class='bat-variable'>%cd%</span>
<span class='bat-keyword'>echo</span> <span class='bat-variable'>%graphviz%</span> -<span class='bat-identifier'>Tsvg</span> -<span class='bat-identifier'>Tpng</span> -<span class='bat-identifier'>O</span> <span class='bat-variable'>%sitemapfile%</span>
<span class='bat-variable'>%graphviz%</span> -<span class='bat-identifier'>Tsvg</span> -<span class='bat-identifier'>Tpng</span> -<span class='bat-identifier'>O</span> <span class='bat-variable'>%sitemapfile%</span>
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>
<span class='bat-keyword'>echo</span> ...<span class='bat-identifier'>Ok</span>
<span class='bat-keyword'>cd</span> <span class='bat-variable'>%prevcd%</span>
<span class='bat-keyword'>echo</span> <span class='bat-identifier'>returned</span> <span class='bat-identifier'>to</span> <span class='bat-variable'>%cd%</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>TRANSFORMSITE</span><span class='bat-label'>

:TRANSFORMSITE</span>
<span class='bat-keyword'>call</span> <span class='bat-identifier'>Transform</span>.<span class='bat-identifier'>bat</span> <span class='bat-variable'>%mainxml%</span> <span class='bat-identifier'>site2htmlxpdesktop</span>.<span class='bat-identifier'>xsl</span> <span class='bat-identifier'>main</span>.<span class='bat-variable'>%outext%</span> <span class='bat-double-quoted'>&quot;outext=<span class='bat-variable'>%outext%</span>&quot;</span> <span class='bat-double-quoted'>&quot;imgdir=<span class='bat-variable'>%imgdir%</span>&quot;</span>
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>OPTIMIZEHTML</span><span class='bat-label'>

:OPTIMIZEHTML</span>
<span class='bat-keyword'>echo</span>.
<span class='bat-keyword'>echo</span> **** <span class='bat-identifier'>Optimizing</span> <span class='bat-identifier'>html</span> <span class='bat-identifier'>files</span>...
<span class='bat-variable'>%bindir%</span>\<span class='bat-identifier'>ahc</span> <span class='bat-double-quoted'>&quot;<span class='bat-variable'>%outdir%</span>\&quot;</span> -<span class='bat-identifier'>m</span><span class='bat-double-quoted'>&quot;*.htm; *.html&quot;</span> -<span class='bat-identifier'>y</span>+ -<span class='bat-identifier'>l</span>+ -<span class='bat-identifier'>w</span>+ -<span class='bat-identifier'>q</span>- -<span class='bat-identifier'>t</span>- -<span class='bat-identifier'>c</span>- -<span class='bat-identifier'>d</span>- -<span class='bat-identifier'>m</span>- -<span class='bat-identifier'>s</span>- -<span class='bat-identifier'>b</span>-
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>
<span class='bat-keyword'>echo</span> ...<span class='bat-identifier'>Ok</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>CREATERSS</span><span class='bat-label'>

:CREATERSS</span>
<span class='bat-keyword'>call</span> <span class='bat-identifier'>Transform</span>.<span class='bat-identifier'>bat</span> <span class='bat-variable'>%mainxml%</span> <span class='bat-identifier'>site2rss</span>.<span class='bat-identifier'>xsl</span> <span class='bat-identifier'>rssnews</span>.<span class='bat-identifier'>xml</span> <span class='bat-double-quoted'>&quot;outfile=rssnews.xml&quot;</span> <span class='bat-double-quoted'>&quot;outext=<span class='bat-variable'>%outext%</span>&quot;</span>
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>CREATESITEMAPFILE</span><span class='bat-label'>

:CREATESITEMAPFILE</span>
<span class='bat-keyword'>call</span> <span class='bat-identifier'>Transform</span>.<span class='bat-identifier'>bat</span> <span class='bat-variable'>%mainxml%</span> <span class='bat-identifier'>site2sitemap</span>.<span class='bat-identifier'>xsl</span> <span class='bat-identifier'>sitemap</span>.<span class='bat-identifier'>xml</span> <span class='bat-double-quoted'>&quot;outext=<span class='bat-variable'>%outext%</span>&quot;</span>
<span class='bat-keyword'>if</span> <span class='bat-keyword'>errorlevel</span> 1 <span class='bat-keyword'>goto</span> <span class='bat-identifier'>ERROR</span>
<span class='bat-keyword'>goto</span> <span class='bat-identifier'>END</span><span class='bat-label'>

:ERROR</span>
<span class='bat-keyword'>echo</span> (!) <span class='bat-identifier'>Something</span> <span class='bat-identifier'>was</span> <span class='bat-identifier'>wrong</span>, <span class='bat-identifier'>check</span> <span class='bat-identifier'>and</span> <span class='bat-identifier'>retry</span>!
<span class='bat-line-comment'>rem sendmail.exe -t &lt; error_mail.txt</span>
<span class='bat-keyword'>pause</span>
<span class='bat-keyword'>exit</span><span class='bat-label'>

:END</span>
<span class='bat-line-comment'>rem   ****      Nothing more to do      ****</span>
<span class='bat-keyword'>echo</span>.
<span class='bat-keyword'>echo</span> ...<span class='bat-identifier'>All</span> <span class='bat-identifier'>done</span>
<span class='bat-keyword'>exit</span>
<span class='bat-line-comment'>rem   ****        End of file           ****</span>
</div></body>
</html>